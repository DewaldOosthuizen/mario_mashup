[gd_scene load_steps=6 format=2]

[ext_resource path="res://resources/Levels/deserttileset/png/Tile/14.png" type="Texture" id=1]
[ext_resource path="res://resources/Levels/deserttileset/png/Tile/15.png" type="Texture" id=2]
[ext_resource path="res://resources/Levels/deserttileset/png/Tile/16.png" type="Texture" id=3]

[sub_resource type="GDScript" id=1]
script/source = "extends Node2D

# Declare member variables here. Examples:
onready var tweenNode = get_node(\"Tween\")

var tweenRunning = false
var moveDirectionX = 1 # -1 = left, 1 = right
var moveDirectionY = 0 # -1 = up, 1 = down
var canTween = false
var moveDistanceX = 500 
var moveDistanceY = 0
var movementPosition = self.position
var tweenDuration = 4 # duration of tween moving from position
var trans_type = Tween.TRANS_LINEAR
var ease_type = Tween.EASE_IN_OUT

# Called when the node enters the scene tree for the first time.
func _ready():
	set_process(true)
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	if (!tweenRunning && canTween):
		tweenRunning = true
		
		# check if the signal is connected
		if (!tweenNode.is_connected(\"tween_completed\", self, \"_on_tween_completed\")):
			# connect the signal, once tween is completed it will call the _on_tween_completed method
			tweenNode.connect(\"tween_completed\", self, \"_on_tween_completed\")
		
		# tween properties
		tweenNode.interpolate_property(self, \"position\", self.position, movementPosition, tweenDuration, trans_type, ease_type)
		#start tween
		tweenNode.start()
	pass


func _set_can_tween(value):
	movementPosition = self.position + Vector2(moveDistanceX * moveDirectionX, moveDistanceY * moveDirectionY)
	canTween = value
	pass


func _change_x_direction():
	# change x direction
	if (moveDirectionX == 1):
		moveDirectionX = -1
	elif (moveDirectionX == -1):
		moveDirectionX = 1


func _change_y_direction():
	# change y direction
	if (moveDirectionY == 1):
		moveDirectionY = -1
	elif (moveDirectionY == -1):
		moveDirectionY = 1


func _on_tween_completed(object, key):
	_change_x_direction()
	_change_y_direction()
	
	movementPosition = self.position + Vector2(moveDistanceX * moveDirectionX, moveDistanceY * moveDirectionY)
	tweenRunning = false
	pass"

[sub_resource type="RectangleShape2D" id=2]
extents = Vector2( 190.048, 43.6754 )

[node name="Float" type="Node2D" groups=[
"float",
]]
scale = Vector2( 0.7, 0.7 )
script = SubResource( 1 )

[node name="1" type="Sprite" parent="."]
position = Vector2( -121.194, 12.5911 )
texture = ExtResource( 1 )

[node name="2" type="Sprite" parent="."]
position = Vector2( 3.35141, 12.4835 )
texture = ExtResource( 2 )

[node name="3" type="Sprite" parent="."]
position = Vector2( 130.604, 12.4835 )
texture = ExtResource( 3 )

[node name="StaticBody2D" type="StaticBody2D" parent="."]
position = Vector2( -25.8726, 12.6355 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="StaticBody2D"]
position = Vector2( 30.6972, -2.70749 )
shape = SubResource( 2 )

[node name="Tween" type="Tween" parent="."]
